language: cpp
matrix:
  include:
  - os: linux
    env: TARGET=x86_64-unknown-linux-gnu
compiler:
- gcc
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - perl
script:
- git submodule update --init
- "./build.sh"
after_success:
- pwd; ls RELEASE
deploy:
  provider: releases
  api_key:
    secure: ${GH_TOKEN}
  file_glob: 'true'
  file: RELEASE/*
  on:
    tags: true
    repo: mitsut/hakoniwa
  skip_cleanup: true
